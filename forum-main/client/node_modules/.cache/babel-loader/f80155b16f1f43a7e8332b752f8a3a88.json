{"ast":null,"code":"import _toConsumableArray from\"/Users/timato/Documents/WEB102/Final/forum/forum-main/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _regeneratorRuntime from\"/Users/timato/Documents/WEB102/Final/forum/forum-main/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/timato/Documents/WEB102/Final/forum/forum-main/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/timato/Documents/WEB102/Final/forum/forum-main/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import Card from'../components/Card';import SearchBar from'../components/SearchBar';import{supabase}from'../client';import'../pages/ReadPosts.css';import SortButtons from'../components/SortButtons';import'../components/SearchBar.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ReadPosts=function ReadPosts(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),posts=_useState2[0],setPosts=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),searchResults=_useState4[0],setSearchResults=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),searchTerm=_useState6[0],setSearchTerm=_useState6[1];useEffect(function(){var fetchPosts=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _yield$supabase$from$,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return supabase.from('SportsTalk').select().order('created_at',{ascending:true});case 3:_yield$supabase$from$=_context.sent;data=_yield$supabase$from$.data;setPosts(data);setSearchResults(data);_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](0);console.error('Error fetching data:',_context.t0.message);case 12:case\"end\":return _context.stop();}}},_callee,null,[[0,9]]);}));return function fetchPosts(){return _ref.apply(this,arguments);};}();fetchPosts();},[]);var handleSearch=function handleSearch(title){setSearchTerm(title);// Update search term\nif(title.trim()===''){setSearchResults(posts);// If search term is empty, display all posts\n}else{var filtered=posts.filter(function(post){return post.title.toLowerCase().includes(title.toLowerCase());});setSearchResults(filtered);}};var sortByNewest=function sortByNewest(){var sortedPosts=_toConsumableArray(searchResults).sort(function(a,b){return new Date(b.created_at)-new Date(a.created_at);});setSearchResults(sortedPosts);};var sortByMostPopular=function sortByMostPopular(){var sortedPosts=_toConsumableArray(searchResults).sort(function(a,b){return b.upvotes-a.upvotes;});setSearchResults(sortedPosts);};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(SearchBar,{onSearch:handleSearch}),\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"sort-buttons\",children:/*#__PURE__*/_jsx(SortButtons,{sortByNewest:sortByNewest,sortByMostPopular:sortByMostPopular})}),/*#__PURE__*/_jsx(\"div\",{className:\"ReadPosts\",children:searchResults.map(function(post){return/*#__PURE__*/_jsx(Card,{id:post.id,title:post.title},post.id);})})]});};export default ReadPosts;","map":{"version":3,"names":["React","useState","useEffect","Card","SearchBar","supabase","SortButtons","ReadPosts","posts","setPosts","searchResults","setSearchResults","searchTerm","setSearchTerm","fetchPosts","from","select","order","ascending","data","console","error","message","handleSearch","title","trim","filtered","filter","post","toLowerCase","includes","sortByNewest","sortedPosts","sort","a","b","Date","created_at","sortByMostPopular","upvotes","map","id"],"sources":["/Users/timato/Documents/WEB102/Final/forum/forum-main/client/src/pages/ReadPosts.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport Card from '../components/Card';\nimport SearchBar from '../components/SearchBar';\nimport { supabase } from '../client';\nimport '../pages/ReadPosts.css';\nimport SortButtons from '../components/SortButtons';\nimport '../components/SearchBar.css'\n\nconst ReadPosts = () => {\n    const [posts, setPosts] = useState([]);\n    const [searchResults, setSearchResults] = useState([]);\n    const [searchTerm, setSearchTerm] = useState('');\n\n    useEffect(() => {\n        const fetchPosts = async () => {\n            try {\n                const { data } = await supabase\n                    .from('SportsTalk')\n                    .select()\n                    .order('created_at', { ascending: true });\n\n                setPosts(data);\n                setSearchResults(data);\n            } catch (error) {\n                console.error('Error fetching data:', error.message);\n            }\n        };\n\n        fetchPosts();\n    }, []);\n\n    const handleSearch = (title) => {\n        setSearchTerm(title); // Update search term\n        if (title.trim() === '') {\n            setSearchResults(posts); // If search term is empty, display all posts\n        } else {\n            const filtered = posts.filter((post) =>\n                post.title.toLowerCase().includes(title.toLowerCase())\n            );\n            setSearchResults(filtered);\n        }\n    };\n\n    const sortByNewest = () => {\n        const sortedPosts = [...searchResults].sort((a, b) => {\n            return new Date(b.created_at) - new Date(a.created_at);\n        });\n        setSearchResults(sortedPosts);\n    };\n\n    const sortByMostPopular = () => {\n        const sortedPosts = [...searchResults].sort((a, b) => b.upvotes - a.upvotes);\n        setSearchResults(sortedPosts);\n    };\n\n    return (\n        <>\n        <SearchBar onSearch={handleSearch} /> <br />\n        <div className=\"sort-buttons\">\n                <SortButtons sortByNewest={sortByNewest} sortByMostPopular={sortByMostPopular} />\n        </div>\n        <div className=\"ReadPosts\">\n            {searchResults.map((post) => (\n                <Card key={post.id} id={post.id} title={post.title} />\n            ))}\n        </div>\n        </>\n    );\n};\n\nexport default ReadPosts;"],"mappings":"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"},"metadata":{},"sourceType":"module"}