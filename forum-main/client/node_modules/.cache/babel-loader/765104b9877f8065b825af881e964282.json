{"ast":null,"code":"import _regeneratorRuntime from\"/Users/timato/Documents/WEB102/Final/forum/forum-main/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/timato/Documents/WEB102/Final/forum/forum-main/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/timato/Documents/WEB102/Final/forum/forum-main/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import'../components/Card.css';import more from'./more.png';import{Link}from'react-router-dom';import{supabase}from'../client';import{useParams}from'react-router-dom';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var Card=function Card(props){var _useParams=useParams(),id=_useParams.id;var _useState=useState({id:null,title:\"\",content:\"\",link:\"\"}),_useState2=_slicedToArray(_useState,2),post=_useState2[0],setPost=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),timeAgo=_useState4[0],setTimeAgo=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),count=_useState6[0],setCount=_useState6[1];useEffect(function(){var fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _yield$supabase$from$,data,createdAt,currentTime,hoursDifference;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return supabase.from('SportsTalk').select().eq('id',props.id).single();case 3:_yield$supabase$from$=_context.sent;data=_yield$supabase$from$.data;createdAt=new Date(data.created_at);currentTime=new Date();hoursDifference=Math.abs(currentTime-createdAt)/36e5;setTimeAgo(calculateTimeAgo(hoursDifference));setCount(data.upvotes);_context.next=15;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](0);console.error('Error fetching data:',_context.t0.message);case 15:case\"end\":return _context.stop();}}},_callee,null,[[0,12]]);}));return function fetchData(){return _ref.apply(this,arguments);};}();fetchData();},[props.id]);var calculateTimeAgo=function calculateTimeAgo(hours){if(hours<1){return\"Just now\";}else if(hours<24){var hoursCount=Math.round(hours);return hoursCount===1?hoursCount+\" hour ago\":hoursCount+\" hours ago\";}else if(hours<24*7){var daysCount=Math.round(hours/24);return daysCount===1?daysCount+\" day ago\":daysCount+\" days ago\";}else if(hours<24*30){var weeksCount=Math.round(hours/(24*7));return weeksCount===1?weeksCount+\" week ago\":weeksCount+\" weeks ago\";}else{var monthsCount=Math.round(hours/(24*30));return monthsCount===1?monthsCount+\" month ago\":monthsCount+\" months ago\";}};return/*#__PURE__*/_jsx(Link,{to:'info/'+props.id,children:/*#__PURE__*/_jsxs(\"div\",{className:\"Card\",id:\"feed\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Posted \",timeAgo]}),/*#__PURE__*/_jsx(\"h5\",{children:props.title}),/*#__PURE__*/_jsxs(\"p\",{className:\"content\",children:[count,\" upvotes\"]})]})});};export default Card;","map":{"version":3,"names":["React","useState","useEffect","more","Link","supabase","useParams","Card","props","id","title","content","link","post","setPost","timeAgo","setTimeAgo","count","setCount","fetchData","from","select","eq","single","data","createdAt","Date","created_at","currentTime","hoursDifference","Math","abs","calculateTimeAgo","upvotes","console","error","message","hours","hoursCount","round","daysCount","weeksCount","monthsCount"],"sources":["/Users/timato/Documents/WEB102/Final/forum/forum-main/client/src/components/Card.js"],"sourcesContent":["import React, { useState, useEffect } from 'react'\nimport '../components/Card.css'\nimport more from './more.png'\nimport { Link } from 'react-router-dom'\nimport { supabase } from '../client' \nimport { useParams } from 'react-router-dom';\n\n\nconst Card = (props) =>  {\n\n  const { id } = useParams()\n  const [post, setPost] = useState({ id: null, title: \"\", content: \"\", link: \"\"})\n  const [timeAgo, setTimeAgo] = useState(\"\")\n  const [count, setCount] = useState(0)\n\n  useEffect(() => {\n    const fetchData = async () => {\n        try {\n          const { data } = await supabase\n            .from('SportsTalk')\n            .select()\n            .eq('id', props.id)\n            .single();\n\n            const createdAt = new Date(data.created_at);\n            const currentTime = new Date();\n            const hoursDifference = Math.abs(currentTime - createdAt) / 36e5;\n\n            setTimeAgo(calculateTimeAgo(hoursDifference));\n            setCount(data.upvotes)\n\n        } catch (error) {\n            console.error('Error fetching data:', error.message);\n        }\n    };\n\n    fetchData();\n}, [props.id]);\n\nconst calculateTimeAgo = (hours) => {\n  if (hours < 1) {\n      return \"Just now\";\n  } else if (hours < 24) {\n      const hoursCount = Math.round(hours);\n      return hoursCount === 1 ? hoursCount + \" hour ago\" : hoursCount + \" hours ago\";\n  } else if (hours < 24 * 7) {\n      const daysCount = Math.round(hours / 24);\n      return daysCount === 1 ? daysCount + \" day ago\" : daysCount + \" days ago\";\n  } else if (hours < 24 * 30) {\n      const weeksCount = Math.round(hours / (24 * 7));\n      return weeksCount === 1 ? weeksCount + \" week ago\" : weeksCount + \" weeks ago\";\n  } else {\n      const monthsCount = Math.round(hours / (24 * 30));\n      return monthsCount === 1 ? monthsCount + \" month ago\" : monthsCount + \" months ago\";\n  }\n}\n\n\n  return (\n      <Link \n      to={'info/' + props.id}>\n        <div className=\"Card\" id=\"feed\">\n        <p>Posted {timeAgo}</p>\n          <h5>{props.title}</h5>\n        <p className=\"content\">{count} upvotes</p>\n        </div>\n      </Link>\n  );\n};\n\nexport default Card;"],"mappings":"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"},"metadata":{},"sourceType":"module"}